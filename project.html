<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

  <!-- Your site CSS -->
  <link rel="stylesheet" href="assets/global-responsive.css">
  <link rel="stylesheet" href="assets/foundation.css">
  <link rel="stylesheet" href="assets/site-responsive.css">

  <!-- Fonts (keep only once) -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800&display=swap" rel="stylesheet">

  <!-- Tailwind (keep only once) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Dual-mode CSS (root-relative path) -->
  <link rel="stylesheet" href="/assets/access-mode.css">

  <title>Project</title>

  <style>
    /* When burger is open, show the mobile panel (overrides Tailwind `hidden`) */
      html.nav-open [data-nav-panel]{ display:block }
/* In viewer mode, allow the panel overlay to be visible and interactive */
      html[data-mode="viewer"].nav-open [data-nav-panel]{ 
      opacity:1; visibility:visible; pointer-events:auto;
      }
/* Optional: prevent background scroll when menu is open */
      html.nav-open { overflow:hidden; }

    :root{ --page:#ffffff; --ink:#0b152c; --line:#e7edf7; --maxw:1120px; }
    body{font-family:Inter,system-ui,sans-serif; color:var(--ink)}
    .wrap{ max-width:var(--maxw); margin:0 auto; padding:24px }
    header{ border-bottom:1px solid var(--line); background:#fff8 }
    .hero{ min-height:220px; background:#eef4ff; display:flex; align-items:flex-end; }
    .hero-inner{ max-width:var(--maxw); margin:0 auto; padding:36px 24px }
    footer{ border-top:1px solid var(--line); padding:18px 0; color:#6b7897 }
    .proj-body { padding-top: 16px; }
  </style>
</head>

<body class="bg-white" data-mode="viewer">
  <header class="sticky top-0 z-20">
    <div class="wrap flex items-center justify-between">
      <a href="index.html" class="text-lg font-extrabold">The (un)Stable Net</a>

      <!-- Burger button (adds/removes .nav-open on <html>) -->
      <button type="button" aria-label="Menu" data-nav-toggle class="md:hidden p-2 border rounded">
        â˜°
      </button>

      <!-- Nav panel (desktop can use normal layout; mobile toggled by burger) -->
      <nav class="text-sm md:block hidden nav-panel" data-nav-panel data-view-allowed aria-hidden="true">
        <a class="px-3 py-2" href="index.html">Home</a>
        <a class="px-3 py-2" href="home.html">Projects</a>
        <a class="px-3 py-2" href="newsletter.html">Newsletter</a>
        <a class="px-3 py-2" href="bio.html">Bio</a>
        <!-- Editor-only link (hidden in viewer by access-mode.css) -->
        <a class="px-3 py-2" data-editor-ui href="mode.html">Switch view</a>
      </nav>
    </div>
  </header>

  <section class="hero proj-hero">
    <div class="hero-inner">
      <h1 class="proj-title text-3xl font-extrabold"></h1>
      <p class="proj-subtitle text-slate-600 mt-2"></p>
    </div>
  </section>

  <main class="wrap">
    <article class="proj-body prose max-w-none" data-publish-target="project"></article>
  </main>

  <footer>
    <div class="wrap">&copy; The (un)Stable Net</div>
  </footer>

  <!-- Viewer/General modules (ok to load in both modes) -->
  <script type="module" src="assets/sb-init.js"></script>
  <script type="module" src="assets/dynamic-project.js"></script>

  <!-- Load EDITOR modules only when actually in editor mode -->
  <script>
    (function(){
      try {
        var isEditor = (localStorage.getItem('tsn_mode') === 'editor');
        if (!isEditor) return;
        [
          'assets/editor-auth.js',
          'assets/editor-tray.js',
          'assets/editor-quiet.js',
          'assets/editor-unlock.js',
          'assets/live-all-norepl.js'
        ].forEach(function(src){
          var s = document.createElement('script');
          s.type = 'module'; s.src = src;
          document.body.appendChild(s);
        });
      } catch(_) {}
    })();
  </script>

  <!-- Your other general scripts -->
  <script defer src="assets/global-responsive.js"></script>

  <!-- Dual-mode scripts (order matters: nav first, then mode) -->
  <script defer src="/assets/site-nav.js"></script>
  <script defer src="/assets/access-mode.js"></script>
</body>
</html>
